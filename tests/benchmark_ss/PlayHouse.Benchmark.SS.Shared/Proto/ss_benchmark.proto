syntax = "proto3";

package playhouse.benchmark.ss;

option csharp_namespace = "PlayHouse.Benchmark.SS.Shared.Proto";

// ============================================
// Server-to-Server Benchmark Messages
// ============================================

// 클라이언트 → Stage 트리거 요청 (API 통신)
message TriggerApiRequest {
    int32 sequence = 1;
    int32 response_size = 2;
    int64 client_timestamp = 3;
    bytes payload = 4;
}

// Stage → 클라이언트 응답 (API 통신 결과)
message TriggerApiReply {
    int32 sequence = 1;
    int64 ss_elapsed_ticks = 2;      // Stage→Api 구간 측정
    int64 total_elapsed_ticks = 3;   // 전체 처리 시간
    bytes payload = 4;
}

// 클라이언트 → Stage 트리거 요청 (Stage간 통신)
message TriggerStageRequest {
    int32 sequence = 1;
    int32 response_size = 2;
    int64 client_timestamp = 3;
    int64 target_stage_id = 4;
    string target_nid = 5;
    bytes payload = 6;
}

// Stage → 클라이언트 응답 (Stage간 통신 결과)
message TriggerStageReply {
    int32 sequence = 1;
    int64 ss_elapsed_ticks = 2;      // Stage→Stage 구간 측정
    int64 total_elapsed_ticks = 3;   // 전체 처리 시간
    bytes payload = 4;
}

// Stage간/API 내부 메시지
message SSBenchmarkRequest {
    int32 sequence = 1;
    int32 response_size = 2;
}

message SSBenchmarkReply {
    int32 sequence = 1;
    bytes payload = 2;
}
